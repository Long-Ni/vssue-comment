<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Yarn 工作流 | Ni&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="$page.excerpt">
    
    <link rel="preload" href="/vssue-comment/assets/css/0.styles.02c2761a.css" as="style"><link rel="preload" href="/vssue-comment/assets/js/app.9fa4f4bb.js" as="script"><link rel="preload" href="/vssue-comment/assets/js/13.044f1fde.js" as="script"><link rel="preload" href="/vssue-comment/assets/js/3.f0de84e7.js" as="script"><link rel="preload" href="/vssue-comment/assets/js/44.4749cc3b.js" as="script"><link rel="prefetch" href="/vssue-comment/assets/js/10.23cc3d6b.js"><link rel="prefetch" href="/vssue-comment/assets/js/11.c63e2dcc.js"><link rel="prefetch" href="/vssue-comment/assets/js/12.d7671ee7.js"><link rel="prefetch" href="/vssue-comment/assets/js/14.399fc32e.js"><link rel="prefetch" href="/vssue-comment/assets/js/15.37bef016.js"><link rel="prefetch" href="/vssue-comment/assets/js/16.2ae3cc61.js"><link rel="prefetch" href="/vssue-comment/assets/js/17.10c0352f.js"><link rel="prefetch" href="/vssue-comment/assets/js/18.02aac107.js"><link rel="prefetch" href="/vssue-comment/assets/js/19.ac0b8b1d.js"><link rel="prefetch" href="/vssue-comment/assets/js/20.656ccc17.js"><link rel="prefetch" href="/vssue-comment/assets/js/21.d1f01d1a.js"><link rel="prefetch" href="/vssue-comment/assets/js/22.6e251d71.js"><link rel="prefetch" href="/vssue-comment/assets/js/23.caaa7b12.js"><link rel="prefetch" href="/vssue-comment/assets/js/24.33d428f1.js"><link rel="prefetch" href="/vssue-comment/assets/js/25.207f6b5f.js"><link rel="prefetch" href="/vssue-comment/assets/js/26.398d8fee.js"><link rel="prefetch" href="/vssue-comment/assets/js/27.d4ae83e5.js"><link rel="prefetch" href="/vssue-comment/assets/js/28.66c58624.js"><link rel="prefetch" href="/vssue-comment/assets/js/29.a6686645.js"><link rel="prefetch" href="/vssue-comment/assets/js/30.242e18b7.js"><link rel="prefetch" href="/vssue-comment/assets/js/31.7da4eecc.js"><link rel="prefetch" href="/vssue-comment/assets/js/32.9b8f3ea0.js"><link rel="prefetch" href="/vssue-comment/assets/js/33.075dbe36.js"><link rel="prefetch" href="/vssue-comment/assets/js/34.838ce186.js"><link rel="prefetch" href="/vssue-comment/assets/js/35.3bbd155f.js"><link rel="prefetch" href="/vssue-comment/assets/js/36.a07ab564.js"><link rel="prefetch" href="/vssue-comment/assets/js/37.50ef72a3.js"><link rel="prefetch" href="/vssue-comment/assets/js/38.75b498ed.js"><link rel="prefetch" href="/vssue-comment/assets/js/39.3b1e3afb.js"><link rel="prefetch" href="/vssue-comment/assets/js/4.79c2a3ee.js"><link rel="prefetch" href="/vssue-comment/assets/js/40.0a6fdf1b.js"><link rel="prefetch" href="/vssue-comment/assets/js/41.9be8ec60.js"><link rel="prefetch" href="/vssue-comment/assets/js/42.9ce4d2b3.js"><link rel="prefetch" href="/vssue-comment/assets/js/43.c76f9c55.js"><link rel="prefetch" href="/vssue-comment/assets/js/45.605778e4.js"><link rel="prefetch" href="/vssue-comment/assets/js/46.fd2913a3.js"><link rel="prefetch" href="/vssue-comment/assets/js/47.5b787534.js"><link rel="prefetch" href="/vssue-comment/assets/js/48.7cf6064e.js"><link rel="prefetch" href="/vssue-comment/assets/js/49.ffa11e3d.js"><link rel="prefetch" href="/vssue-comment/assets/js/5.6a98c4eb.js"><link rel="prefetch" href="/vssue-comment/assets/js/50.69284de8.js"><link rel="prefetch" href="/vssue-comment/assets/js/6.0cbbe057.js"><link rel="prefetch" href="/vssue-comment/assets/js/7.feaf1269.js"><link rel="prefetch" href="/vssue-comment/assets/js/8.9c40e8a4.js"><link rel="prefetch" href="/vssue-comment/assets/js/9.b2c8bfda.js"><link rel="prefetch" href="/vssue-comment/assets/js/vuejs-paginate.8412c6fc.js">
    <link rel="stylesheet" href="/vssue-comment/assets/css/0.styles.02c2761a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/vssue-comment/" class="nav-link home-link">Ni's Blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/vssue-comment/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/vssue-comment/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/vssue-comment/" class="nav-link mobile-home-link">Ni's Blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/vssue-comment/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/vssue-comment/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Yarn 工作流
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">Ni</span> <span itemprop="address">   in 大连</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-11-23 03:21:00+0800">
      Mon Nov 23 2020
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/vssue-comment/tag/Yarn" data-v-42ccfcd5><span data-v-42ccfcd5>Yarn</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>将包管理器引入项目中会引入一个围绕依赖关系的新工作流。</p> <p>目录：</p> <div><ul><li><a href="/vssue-comment/2020/11/23/_03-yarn-workflow/#_1-创建一个新项目">1. 创建一个新项目</a></li><li><a href="/vssue-comment/2020/11/23/_03-yarn-workflow/#_2-管理依赖项">2. 管理依赖项</a><ul><li><a href="/vssue-comment/2020/11/23/_03-yarn-workflow/#添加依赖项">添加依赖项</a></li><li><a href="/vssue-comment/2020/11/23/_03-yarn-workflow/#更新依赖项">更新依赖项</a></li><li><a href="/vssue-comment/2020/11/23/_03-yarn-workflow/#删除依赖项">删除依赖项</a></li></ul></li><li><a href="/vssue-comment/2020/11/23/_03-yarn-workflow/#_3-安装依赖项">3. 安装依赖项</a></li><li><a href="/vssue-comment/2020/11/23/_03-yarn-workflow/#_4-使用版本管理工具">4. 使用版本管理工具</a></li><li><a href="/vssue-comment/2020/11/23/_03-yarn-workflow/#_5-持续集成">5. 持续集成</a></li></ul></div> <h2 id="_1-创建一个新项目"><a href="#_1-创建一个新项目" class="header-anchor">#</a> 1. 创建一个新项目</h2> <p>在项目根目录下使用以下命令</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> init
</code></pre></div><p>这将打开一个交互式表单，用于创建一个新的 Yarn 项目，涉及以下问题：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>name <span class="token punctuation">(</span>your-project<span class="token punctuation">)</span>:
version <span class="token punctuation">(</span><span class="token number">1.0</span>.0<span class="token punctuation">)</span>:
description:
entry point <span class="token punctuation">(</span>index.js<span class="token punctuation">)</span>:
<span class="token function">git</span> repository:
author:
license <span class="token punctuation">(</span>MIT<span class="token punctuation">)</span>:
</code></pre></div><p>您可以为每个问题输入答案，也可以直接按 <strong>Enter</strong> 键使用默认值或将其保留为空白。</p> <p>现在，你应该具有一个类似于以下内容的 <strong>package.json</strong> 文件：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-new-project&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;My New Project description.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;repository&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://example.com/your-username/my-new-project&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Your Name &lt;you@example.com&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当你运行 <code>yarn init</code> 时，它所做的就是创建该文件，后台无任何操作，你可以随意编辑该文件。</p> <p><strong>package.json</strong> 用于存储有关项目的信息，包括项目名称，维护者，源代码所在的位置，但最重要的是，<strong>指明该项目所需要的依赖项</strong>。</p> <h2 id="_2-管理依赖项"><a href="#_2-管理依赖项" class="header-anchor">#</a> 2. 管理依赖项</h2> <p>当你要添加，升级或删除依赖项时，需要了解几个不同的命令。</p> <p>每个命令将自动更新你的 <strong>package.json</strong> 和 <strong>yarn.lock</strong> 文件。</p> <h3 id="添加依赖项"><a href="#添加依赖项" class="header-anchor">#</a> 添加依赖项</h3> <p>如果要使用其他软件包，首先需要将其添加为依赖项，运行：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span>
</code></pre></div><p>这会自动将 <strong>[package]</strong> 添加到 <strong>package.json</strong> 文件的依赖项中，还会更新 <strong>yarn.lock</strong> 文件以映射此更改。</p> <div class="language-json extra-class"><pre class="language-json"><code>  <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-package&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;package-1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.0&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>你也可以通过制定参数添加包到指定的类型的依赖项中：</p> <ul><li><code>yarn add [package] --dev</code> 添加包到 <strong>devDependencies</strong></li> <li><code>yarn add [package] --peer</code> 添加包到 <strong>peerDependencies</strong></li> <li><code>yarn add [package] --optional</code> 添加包到 <strong>optionalDependencies</strong></li></ul> <p>你可以通过指定依赖版本或标签来指定要安装的软件包版本。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span>@<span class="token punctuation">[</span>version<span class="token punctuation">]</span>
<span class="token function">yarn</span> <span class="token function">add</span> <span class="token punctuation">[</span>package<span class="token punctuation">]</span>@<span class="token punctuation">[</span>tag<span class="token punctuation">]</span>
</code></pre></div><p><strong>[version]</strong> 或 <strong>[tag]</strong> 将被添加到 <strong>package.json</strong> 中，然后在安装依赖项时解决。</p> <p>例如：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> package-1@1.2.3
<span class="token function">yarn</span> <span class="token function">add</span> package-2@^1.0.0
<span class="token function">yarn</span> <span class="token function">add</span> package-3@beta
</code></pre></div><p><strong>package.json</strong>:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;package-1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;package-2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;package-3&quot;</span><span class="token operator">:</span> <span class="token string">&quot;beta&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="更新依赖项"><a href="#更新依赖项" class="header-anchor">#</a> 更新依赖项</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> upgrade <span class="token punctuation">[</span>package<span class="token punctuation">]</span>
<span class="token function">yarn</span> upgrade <span class="token punctuation">[</span>package<span class="token punctuation">]</span>@<span class="token punctuation">[</span>version<span class="token punctuation">]</span>
<span class="token function">yarn</span> upgrade <span class="token punctuation">[</span>package<span class="token punctuation">]</span>@<span class="token punctuation">[</span>tag<span class="token punctuation">]</span>
</code></pre></div><h3 id="删除依赖项"><a href="#删除依赖项" class="header-anchor">#</a> 删除依赖项</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> remove <span class="token punctuation">[</span>package<span class="token punctuation">]</span>
</code></pre></div><h2 id="_3-安装依赖项"><a href="#_3-安装依赖项" class="header-anchor">#</a> 3. 安装依赖项</h2> <p>如果刚从版本控制中检出软件包，则需要安装这些依赖项。</p> <h4 id="安装依赖"><a href="#安装依赖" class="header-anchor">#</a> 安装依赖</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">install</span>
</code></pre></div><p>此命令用于安装项目的所有依赖项。 从项目的 <strong>package.json</strong> 文件中检索依赖关系，并将其存储在yarn.lock文件中。</p> <p>开发软件包时，安装依赖项通常是在执行以下操作：</p> <ul><li>你刚刚签出了需要这些依赖项才能起作用的项目的代码。</li> <li>该项目的另一位开发人员添加了一个新的依赖项，你需要对其进行选择。</li></ul> <h4 id="安装依赖选项"><a href="#安装依赖选项" class="header-anchor">#</a> 安装依赖选项</h4> <p>有许多安装依赖项的选项，包括：</p> <ul><li>安装所有依赖项：<code>yarn</code> 或 <code>yarn install</code></li> <li>安装软件包的一个有且只有一个版本：<code>yarn install --flat</code></li> <li>强制重新下载所有软件包：<code>yarn install --force</code></li> <li>仅安装生产依赖项：<code>yarn install --production</code></li></ul> <h2 id="_4-使用版本管理工具"><a href="#_4-使用版本管理工具" class="header-anchor">#</a> 4. 使用版本管理工具</h2> <p>为了使人们成功开发或使用你的软件包，你需要确保将所有必需的文件都检入你的源代码控制系统。</p> <h4 id="必须的文件"><a href="#必须的文件" class="header-anchor">#</a> 必须的文件</h4> <p>必须将以下文件检入源代码管理中，以便任何人都可以管理你的程序包：</p> <ul><li><strong>package.json</strong>: 包含模块所有当前依赖。</li> <li><strong>yarn.lock</strong>: 存储模块中每个依赖的确切版本。</li> <li>提供模块功能的实际源代码。</li></ul> <p>package.json：它具有您软件包的所有当前依赖项。
yarn.lock：这将为您的包存储每个依赖项的确切版本。
提供软件包功能的实际源代码。
请查看“纱样包”，以了解纱包的最低要求。</p> <h2 id="_5-持续集成"><a href="#_5-持续集成" class="header-anchor">#</a> 5. 持续集成</h2> <p><strong>Yarn</strong> 可以轻松地用于各种持续集成系统中。</p> <p>为了加快构建速度，可以在各个构建之间保存 <strong>Yarn</strong> 缓存目录。</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#_1-创建一个新项目" title="1. 创建一个新项目">1. 创建一个新项目</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_2-管理依赖项" title="2. 管理依赖项">2. 管理依赖项</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#添加依赖项" title="添加依赖项">添加依赖项</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#更新依赖项" title="更新依赖项">更新依赖项</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#删除依赖项" title="删除依赖项">删除依赖项</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_3-安装依赖项" title="3. 安装依赖项">3. 安装依赖项</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_4-使用版本管理工具" title="4. 使用版本管理工具">4. 使用版本管理工具</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_5-持续集成" title="5. 持续集成">5. 持续集成</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8>Privacy Policy</a></li><li class="copyright-item" data-v-3d9deeb8>MIT Licensed | Copyright © 2018-present Vue.js</li></ul></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/vssue-comment/assets/js/app.9fa4f4bb.js" defer></script><script src="/vssue-comment/assets/js/13.044f1fde.js" defer></script><script src="/vssue-comment/assets/js/3.f0de84e7.js" defer></script><script src="/vssue-comment/assets/js/44.4749cc3b.js" defer></script>
  </body>
</html>
