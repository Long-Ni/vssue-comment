<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java 集成 MongoDB 并访问数据 | Ni&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="$page.excerpt">
    
    <link rel="preload" href="/vssue-comment/assets/css/0.styles.02c2761a.css" as="style"><link rel="preload" href="/vssue-comment/assets/js/app.9fa4f4bb.js" as="script"><link rel="preload" href="/vssue-comment/assets/js/13.044f1fde.js" as="script"><link rel="preload" href="/vssue-comment/assets/js/3.f0de84e7.js" as="script"><link rel="preload" href="/vssue-comment/assets/js/32.9b8f3ea0.js" as="script"><link rel="prefetch" href="/vssue-comment/assets/js/10.23cc3d6b.js"><link rel="prefetch" href="/vssue-comment/assets/js/11.c63e2dcc.js"><link rel="prefetch" href="/vssue-comment/assets/js/12.d7671ee7.js"><link rel="prefetch" href="/vssue-comment/assets/js/14.399fc32e.js"><link rel="prefetch" href="/vssue-comment/assets/js/15.37bef016.js"><link rel="prefetch" href="/vssue-comment/assets/js/16.2ae3cc61.js"><link rel="prefetch" href="/vssue-comment/assets/js/17.10c0352f.js"><link rel="prefetch" href="/vssue-comment/assets/js/18.02aac107.js"><link rel="prefetch" href="/vssue-comment/assets/js/19.ac0b8b1d.js"><link rel="prefetch" href="/vssue-comment/assets/js/20.656ccc17.js"><link rel="prefetch" href="/vssue-comment/assets/js/21.d1f01d1a.js"><link rel="prefetch" href="/vssue-comment/assets/js/22.6e251d71.js"><link rel="prefetch" href="/vssue-comment/assets/js/23.caaa7b12.js"><link rel="prefetch" href="/vssue-comment/assets/js/24.33d428f1.js"><link rel="prefetch" href="/vssue-comment/assets/js/25.207f6b5f.js"><link rel="prefetch" href="/vssue-comment/assets/js/26.398d8fee.js"><link rel="prefetch" href="/vssue-comment/assets/js/27.d4ae83e5.js"><link rel="prefetch" href="/vssue-comment/assets/js/28.66c58624.js"><link rel="prefetch" href="/vssue-comment/assets/js/29.a6686645.js"><link rel="prefetch" href="/vssue-comment/assets/js/30.242e18b7.js"><link rel="prefetch" href="/vssue-comment/assets/js/31.7da4eecc.js"><link rel="prefetch" href="/vssue-comment/assets/js/33.075dbe36.js"><link rel="prefetch" href="/vssue-comment/assets/js/34.838ce186.js"><link rel="prefetch" href="/vssue-comment/assets/js/35.3bbd155f.js"><link rel="prefetch" href="/vssue-comment/assets/js/36.a07ab564.js"><link rel="prefetch" href="/vssue-comment/assets/js/37.50ef72a3.js"><link rel="prefetch" href="/vssue-comment/assets/js/38.75b498ed.js"><link rel="prefetch" href="/vssue-comment/assets/js/39.3b1e3afb.js"><link rel="prefetch" href="/vssue-comment/assets/js/4.79c2a3ee.js"><link rel="prefetch" href="/vssue-comment/assets/js/40.0a6fdf1b.js"><link rel="prefetch" href="/vssue-comment/assets/js/41.9be8ec60.js"><link rel="prefetch" href="/vssue-comment/assets/js/42.9ce4d2b3.js"><link rel="prefetch" href="/vssue-comment/assets/js/43.c76f9c55.js"><link rel="prefetch" href="/vssue-comment/assets/js/44.4749cc3b.js"><link rel="prefetch" href="/vssue-comment/assets/js/45.605778e4.js"><link rel="prefetch" href="/vssue-comment/assets/js/46.fd2913a3.js"><link rel="prefetch" href="/vssue-comment/assets/js/47.5b787534.js"><link rel="prefetch" href="/vssue-comment/assets/js/48.7cf6064e.js"><link rel="prefetch" href="/vssue-comment/assets/js/49.ffa11e3d.js"><link rel="prefetch" href="/vssue-comment/assets/js/5.6a98c4eb.js"><link rel="prefetch" href="/vssue-comment/assets/js/50.69284de8.js"><link rel="prefetch" href="/vssue-comment/assets/js/6.0cbbe057.js"><link rel="prefetch" href="/vssue-comment/assets/js/7.feaf1269.js"><link rel="prefetch" href="/vssue-comment/assets/js/8.9c40e8a4.js"><link rel="prefetch" href="/vssue-comment/assets/js/9.b2c8bfda.js"><link rel="prefetch" href="/vssue-comment/assets/js/vuejs-paginate.8412c6fc.js">
    <link rel="stylesheet" href="/vssue-comment/assets/css/0.styles.02c2761a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/vssue-comment/" class="nav-link home-link">Ni's Blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/vssue-comment/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/vssue-comment/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/vssue-comment/" class="nav-link mobile-home-link">Ni's Blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/vssue-comment/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/vssue-comment/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        Java 集成 MongoDB 并访问数据
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">Ni</span> <span itemprop="address">   in 大连</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-12-01 12:00:00+0800">
      Tue Dec 01 2020
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/vssue-comment/tag/MongoDB" data-v-42ccfcd5><span data-v-42ccfcd5>MongoDB</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>本教程将引导你完成使用 Spring Data MongoDB 构建应用程序的过程，该应用程序将数据存储在 MongoDB 中，并从 MongoDB （基于文档的数据库）中检索数据。</p> <p>你将使用 Spring Data MongoDB 将 <strong>Customer</strong> POJO（Plain Old Java Objects）存储在MongoDB数据库中。</p> <p>目录：</p> <div><ul><li><a href="/vssue-comment/2020/12/01/accessing-data-with-mongodb/#_1-安装并启动-mongodb">1. 安装并启动 MongoDB</a></li><li><a href="/vssue-comment/2020/12/01/accessing-data-with-mongodb/#_2-add-dependencies">2. Add Dependencies</a></li><li><a href="/vssue-comment/2020/12/01/accessing-data-with-mongodb/#_3-define-a-simple-entity">3. Define a Simple Entity</a></li><li><a href="/vssue-comment/2020/12/01/accessing-data-with-mongodb/#_4-create-simple-queries">4. Create Simple Queries</a></li><li><a href="/vssue-comment/2020/12/01/accessing-data-with-mongodb/#_5-create-an-application-class">5. Create an Application Class</a></li><li><a href="/vssue-comment/2020/12/01/accessing-data-with-mongodb/#_6-build-an-executables-jar">6. Build an executables JAR</a></li><li><a href="/vssue-comment/2020/12/01/accessing-data-with-mongodb/#_7-summary">7. Summary</a></li></ul></div> <h2 id="_1-安装并启动-mongodb"><a href="#_1-安装并启动-mongodb" class="header-anchor">#</a> 1. 安装并启动 MongoDB</h2> <p>Refer to MongoDB.</p> <h2 id="_2-add-dependencies"><a href="#_2-add-dependencies" class="header-anchor">#</a> 2. Add Dependencies</h2> <p><strong>maven</strong>:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-mongodb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>gradle</strong>:</p> <div class="language-java extra-class"><pre class="language-java"><code>implementation <span class="token string">'org.springframework.boot:spring-boot-starter-data-mongodb'</span>
</code></pre></div><h2 id="_3-define-a-simple-entity"><a href="#_3-define-a-simple-entity" class="header-anchor">#</a> 3. Define a Simple Entity</h2> <p>MongoDB 是 NoSQL 文档存储。 在此示例中，你存储 <strong>Customer</strong>对象。 以下显示了 <strong>Customer</strong> 类 (src\main\java\com\njl\demo\accessingdatamongodb\Customer.java)</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>njl<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>accessingdatamongodb</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Id</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Id</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token class-name">String</span> firstName<span class="token punctuation">,</span> <span class="token class-name">String</span> lastName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> firstName<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> lastName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;Customer[id=%s, firstName='%s', lastName='%s']&quot;</span><span class="token punctuation">,</span> 
                             id<span class="token punctuation">,</span> firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>以上有三个属性的 <strong>Customer</strong> 类：<strong>id</strong>，<strong>firstName</strong> 和 <strong>lastName</strong>。 该 <strong>id</strong> 主要供 MongoDB 内部使用。 创建新实例时，你还可以使用单独的构造函数来填充实体。</p> <p><strong>id</strong> 符合 MongoDB ID 的标准名称，因此不需要为 Spring Data MongoDB 使用任何特殊注解去标记它。</p> <p>其他两个属性没有注解， <strong>firstName</strong> 和 <strong>lastName</strong>。 假定它们被映射到与属性本身具有相同名称的字段。</p> <p>toString() 方法可以方便的打印出有关客户的详细信息。</p> <article style="background-color:#ddf7db;padding:16px;"><p style="margin:0px 0px 8px;"><strong>tip</strong></p> <p style="margin:0px;">MongoDB 将数据存储在集合中。 Spring Data MongoDB 将 <strong>Customer</strong> 类映射到一个名为 <strong>customer</strong> 的集合中。 如果要更改集合的名称，可以在类上使用 Spring Data MongoDB 的 <strong>@Document</strong> 注解。</p></article> <h2 id="_4-create-simple-queries"><a href="#_4-create-simple-queries" class="header-anchor">#</a> 4. Create Simple Queries</h2> <p>Spring Data MongoDB 专注于在 MongoDB 中存储数据。 它还从 Spring Data Commons 项目继承了功能，例如导出查询的功能。 本质上，你无需学习 MongoDB 的查询语言。你可以为你的查询编写特殊查询方法。</p> <p>创建一个查询 <strong>Customer</strong> 文档的存储库接口，如以下所示 (src\main\java\com\njl\demo\accessingdatamongodb\CustomerRepository.java)：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>njl<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>accessingdatamongodb</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>repository<span class="token punctuation">.</span></span><span class="token class-name">MongoRepository</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CustomerRepository</span> <span class="token keyword">extends</span> <span class="token class-name">MongoRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Customer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Customer</span> <span class="token function">findByFirstName</span><span class="token punctuation">(</span><span class="token class-name">String</span> firstName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Customer</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByLastName</span><span class="token punctuation">(</span><span class="token class-name">String</span> lastName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>CustomerRepository</strong> 扩展了 <strong>MongoRepository</strong> 接口，并给定使其工作的值和 ID 的类型：分别为 <strong>Customer</strong> 和 <strong>String</strong> 。 该接口包含许多操作，包括标准的 CRUD 操作（创建，读取，更新和删除）。</p> <p>您可以通过声明方法签名定义其他查询。 上述 <strong>findByFirstName</strong>，会查找类型为 <strong>Customer</strong> 的文档并找到与 <strong>firstName</strong> 匹配的文档。</p> <p><strong>findByLastName</strong> 方法按姓氏查找人员列表。</p> <p>在典型的 Java 应用程序中，编写一个实现 <strong>CustomerRepository</strong> 接口的类，并设计自己查询。  Spring Data MongoDB 之所以如此有用，是因为无需创建此这些实现。 当运行应用程序时， Spring Data MongoDB 会即时创建它。</p> <p>现在，您可以连接到此应用程序，并查看其运行！</p> <h2 id="_5-create-an-application-class"><a href="#_5-create-an-application-class" class="header-anchor">#</a> 5. Create an Application Class</h2> <p>Spring Initializr 为应用程序创建一个简单的类。 下面的清单显示了Initializr为此示例创建的类 (src\main\java\com\njl\demo\accessingdatamongodb\AccessingDataMongodbApplication.java):</p> <div class="language- extra-class"><pre class="language-text"><code>package com.njl.demo.accessingdatamongodb;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class AccessingDataMongodbApplication {

    public static void main(String[] args) {
        SpringApplication.run(AccessingDataMongodbApplication.class, args);
    }
}
</code></pre></div><p><strong>@SpringBootApplication</strong> 是一个便利的注解，它包含了以下所有内容：</p> <ul><li><strong>@Configuration</strong> 为应用程序上下文标记定义 Bean 资源的类。</li> <li><strong>@EnableAutoConfiguration</strong> 告诉 Spring Boot 根据类路径设置，其他 beans 和各种属性设置开始添加 beans 。 例如，如果 <strong>spring-webmvc</strong> 在类路径上，则这个注释标记应用程序为 Web 应用程序并且激活关键行为，如 <strong>DispatcherServlet</strong> 的设置。</li> <li><strong>@ComponentScan</strong> 告诉 Spring 在 <strong>com/njl/demo</strong> 包中寻找其他组件，配置和服务，使它找到控制器。</li></ul> <p>main() 方法使用 Spring Boot 的 SpringApplication.run() 方法启动应用程序。 是否注意到没有一行XML？ 也没有 web.xml 文件。 该 Web 应用程序是 100％ 纯 Java ，并且不需要处理任何管道或基础结构。</p> <p>只要它们包含在 <strong>@SpringBootApplication</strong> 类的同一包（或子包）中， Spring Boot 就会自动处理这些存储库。 为了更好地控制注册过程，可以使用 <em>@EnableMongoRepositories</em> 批注。</p> <article style="background-color:#ddf7db;padding:16px;"><p style="margin:0px 0px 8px;"><strong>tip</strong></p> <p style="margin:0px;">默认情况下，<strong>@EnableMongoRepositories</strong> 会在当前包中扫描任何扩展了 Spring Data 存储库接口的接口。 如果项目布局中有多个项目并且找不到存储库，则可以使用其 <strong>basePackageClasses=MyRepository.class</strong> 安全地告诉 Spring Data MongoDB 按类型扫描不同的根包。</p></article> <p>Spring Data MongoDB 使用 <strong>MongoTemplate</strong> 来执行 <strong>find</strong>* 方法后面的查询。 可以自己使用模板进行更复杂的查询。</p> <p>现在，你需要修改 Initializr 为你创建的简单类。 需要设置一些数据并将其用于生成输出 (src\main\java\com\njl\demo\accessingdatamongodb\AccessingDataMongodbApplication.java):</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>njl<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>accessingdatamongodb</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">CommandLineRunner</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AccessingDataMongodbApplication</span> <span class="token keyword">implements</span> <span class="token class-name">CommandLineRunner</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">CustomerRepository</span> repository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">AccessingDataMongodbApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        repository<span class="token punctuation">.</span><span class="token function">deleteAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        repository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Customer found with findAll()&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-----------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Customer</span> customer <span class="token operator">:</span> repository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Customer found with findByFirstName('Alice'):&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;---------------------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>repository<span class="token punctuation">.</span><span class="token function">findByFirstName</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Customer found with findByLastName('Smith'):&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------------------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Customer</span> customer <span class="token operator">:</span> repository<span class="token punctuation">.</span><span class="token function">findByLastName</span><span class="token punctuation">(</span><span class="token string">&quot;Smith&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>customer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>AccessingDataMongodbApplication</strong> 包含 <strong>main()</strong> 方法，该方法自动装配 <strong>CustomerRepository</strong> 的实例。 Spring Data MongoDB 动态创建代理并将其注入到实例中。 我们通过一些测试来使用 <strong>CustomerRepository</strong> 。 首先，它保存了少量 <strong>Customer</strong> 对象，演示了 <strong>save()</strong> 方法并设置了一些要使用的数据。 接下来，它调用 <strong>findAll()</strong> 从数据库中获取所有 <strong>Customer</strong> 对象。 然后，它调用 <strong>findByFirstName()</strong> 通过名称来获取单个 <strong>Customer</strong>。 最后，它调用 <strong>findByLastName()</strong> 来查找姓氏为Smith的所有客户。</p> <article style="background-color:#ddf7db;padding:16px;"><p style="margin:0px 0px 8px;"><strong>tip</strong></p> <p style="margin:0px;">默认情况下， Spring Boot 尝试连接到本地托管的 MongoDB 实例。</p></article> <h2 id="_6-build-an-executables-jar"><a href="#_6-build-an-executables-jar" class="header-anchor">#</a> 6. Build an executables JAR</h2> <p>可以使用 Gradle 或 Maven 从命令行运行该应用程序。 还可以构建一个包含所有必需的依赖项，类和资源的可执行 JAR 文件，然后运行该文件。 构建可执行的 JAR 使得在整个开发生命周期中，跨不同环境等等的情况下，轻松地将服务作为应用程序进行发布，版本化和部署。</p> <p>如果使用 Gradle ，则可以使用 <strong>./gradlew bootRun</strong> 运行该应用程序。 另外，可以使用  <strong>./gradlew build</strong>  来构建JAR文件，然后运行JAR文件，如下所示：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>java -jar build/libs/gs-accessing-data-mongodb-0.1.0.jar
</code></pre></div><p>如果使用 Maven ，则可以使用 <strong>./mvnw spring-boot:run</strong> 运行该应用程序。 或者，您可以使用 <strong>./mvnw clean</strong> 软件包来构建 JAR 文件，然后运行 JAR 文件，如下所示：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>java -jar target/gs-accessing-data-mongodb-0.1.0.jar
</code></pre></div><p>当 <strong>AccessingDataMongodbApplication</strong> 实现 <strong>CommandLineRunner</strong> 时，Spring Boot 启动时将自动调用 <strong>run</strong> 方法。 输出以下的内容：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Customer</span> found <span class="token keyword">with</span> <span class="token namespace">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Customer</span><span class="token punctuation">[</span>id<span class="token operator">=</span><span class="token number">5f</span><span class="token number">1121</span>cea920d71faf42185a<span class="token punctuation">,</span> firstName<span class="token operator">=</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> lastName<span class="token operator">=</span><span class="token string">'Smith'</span><span class="token punctuation">]</span>
<span class="token class-name">Customer</span><span class="token punctuation">[</span>id<span class="token operator">=</span><span class="token number">5f</span><span class="token number">1121</span>cfa920d71faf42185b<span class="token punctuation">,</span> firstName<span class="token operator">=</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> lastName<span class="token operator">=</span><span class="token string">'Smith'</span><span class="token punctuation">]</span>

<span class="token class-name">Customer</span> found <span class="token keyword">with</span> <span class="token namespace">findByFirstName</span><span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token class-name">Customer</span><span class="token punctuation">[</span>id<span class="token operator">=</span><span class="token number">5f</span><span class="token number">1121</span>cea920d71faf42185a<span class="token punctuation">,</span> firstName<span class="token operator">=</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> lastName<span class="token operator">=</span><span class="token string">'Smith'</span><span class="token punctuation">]</span>
<span class="token class-name">Customer</span> found <span class="token keyword">with</span> <span class="token namespace">findByLastName</span><span class="token punctuation">(</span><span class="token string">'Smith'</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token class-name">Customer</span><span class="token punctuation">[</span>id<span class="token operator">=</span><span class="token number">5f</span><span class="token number">1121</span>cea920d71faf42185a<span class="token punctuation">,</span> firstName<span class="token operator">=</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> lastName<span class="token operator">=</span><span class="token string">'Smith'</span><span class="token punctuation">]</span>
<span class="token class-name">Customer</span><span class="token punctuation">[</span>id<span class="token operator">=</span><span class="token number">5f</span><span class="token number">1121</span>cfa920d71faf42185b<span class="token punctuation">,</span> firstName<span class="token operator">=</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> lastName<span class="token operator">=</span><span class="token string">'Smith'</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="_7-summary"><a href="#_7-summary" class="header-anchor">#</a> 7. Summary</h2> <p>恭喜你！ 你设置了一个 MongoDB 服务器，并编写了一个简单的应用程序，该应用程序使用 Spring Data MongoDB 将对象保存到数据库中并从数据库中获取它们，而无需编写具体的存储库实现。</p></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#_1-安装并启动-mongodb" title="1. 安装并启动 MongoDB">1. 安装并启动 MongoDB</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_2-add-dependencies" title="2. Add Dependencies">2. Add Dependencies</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_3-define-a-simple-entity" title="3. Define a Simple Entity">3. Define a Simple Entity</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_4-create-simple-queries" title="4. Create Simple Queries">4. Create Simple Queries</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_5-create-an-application-class" title="5. Create an Application Class">5. Create an Application Class</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_6-build-an-executables-jar" title="6. Build an executables JAR">6. Build an executables JAR</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_7-summary" title="7. Summary">7. Summary</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8><li class="contact-item" data-v-3d9deeb8><a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-3d9deeb8><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-3d9deeb8></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8><li class="copyright-item" data-v-3d9deeb8><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-3d9deeb8>Privacy Policy</a></li><li class="copyright-item" data-v-3d9deeb8>MIT Licensed | Copyright © 2018-present Vue.js</li></ul></div></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/vssue-comment/assets/js/app.9fa4f4bb.js" defer></script><script src="/vssue-comment/assets/js/13.044f1fde.js" defer></script><script src="/vssue-comment/assets/js/3.f0de84e7.js" defer></script><script src="/vssue-comment/assets/js/32.9b8f3ea0.js" defer></script>
  </body>
</html>
