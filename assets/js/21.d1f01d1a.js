(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{506:function(t,v,_){t.exports=_.p+"assets/img/nat-gateway-diagram.8b78637f.png"},564:function(t,v,_){"use strict";_.r(v);var a=_(8),n=Object(a.a)({},(function(){var t=this,v=t.$createElement,a=t._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("NAT 设备支持私有子网中的实例连接到 Internet（例如，以便进行软件更新）或其他 AWS 服务，但阻止 Internet 发起与实例的连接。")]),t._v(" "),a("p",[t._v("NAT 设备将来自私有子网中实例的流量转发到 Internet 或其他 AWS 服务，然后将响应发回给实例。")]),t._v(" "),a("p",[t._v("当流量流向 Internet 时，源 IPv4 地址替换为 NAT 设备的地址，同样，当响应流量流向这些实例时，NAT 设备将地址转换为这些实例的私有 IPv4 地址。")]),t._v(" "),a("p",[t._v("AWS 提供了两种 NAT 设备：一种是 "),a("strong",[t._v("NAT gateway (NAT 网关)")]),t._v("，一种是 "),a("strong",[t._v("NAT instance (NAT 实例)")]),t._v("。")]),t._v(" "),a("p",[t._v("目录：")]),t._v(" "),a("TOC",{attrs:{"include-level":[2,4]}}),t._v(" "),a("h2",{attrs:{id:"nat-网关-nat-gateway"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nat-网关-nat-gateway"}},[t._v("#")]),t._v(" NAT 网关（NAT Gateway）")]),t._v(" "),a("h3",{attrs:{id:"nat-网关基础知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nat-网关基础知识"}},[t._v("#")]),t._v(" NAT 网关基础知识")]),t._v(" "),a("p",[t._v("网络地址转换 (NAT) 网关允许私有子网中的实例连接到 Internet 或其他 AWS 服务，但阻止 Internet 发起与这些实例的连接。")]),t._v(" "),a("p",[t._v("要使私有子网中的实例连接到互联网：")]),t._v(" "),a("ul",[a("li",[t._v("必须将 NAT 网关创建在公有子网中。")]),t._v(" "),a("li",[t._v("必须在创建 NAT 网关的时候指定与该网关关联的 EIP（弹性 IP 地址）。一经关联，无法更改此 EIP。")]),t._v(" "),a("li",[t._v("必须在创建 NAT 网关之后，更新与现有的一个或者多个私有子网相关联的路由表，以将 Internet 绑定流量指向该 NAT 网关。")])]),t._v(" "),a("p",[t._v("删除 NAT 网关会解除其弹性 IP 地址关联，但不会从你的账户中释放该地址。")]),t._v(" "),a("p",[t._v("下图演示了一个包含 NAT 网关的 VPC 架构。主路由表将 Internet 流量从私有子网中的实例发送到 NAT 网关。NAT 网关通过使用自身的弹性 IP 地址作为源 IP 地址，将流量发送到 Internet 网关。")]),t._v(" "),a("p",[a("img",{attrs:{src:_(506),alt:"nat-gateway-diagram"}})]),t._v(" "),a("h4",{attrs:{id:"nat-网关规则和限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nat-网关规则和限制"}},[t._v("#")]),t._v(" NAT 网关规则和限制")]),t._v(" "),a("p",[t._v("NAT 网关具有以下特征和限制：")]),t._v(" "),a("ul",[a("li",[t._v("NAT 网关支持 5 Gbps 带宽并会自动扩展到 45 Gbps。如果您需要更大的带宽，可以通过将资源拆分到多个子网中并在每个子网中都创建 NAT 网关来分配工作负载。")]),t._v(" "),a("li",[t._v("每个 NAT 网关只能关联一个弹性 IP 地址。创建弹性 IP 地址后，无法解除该地址与 NAT 网关的关联。如果您需要为 NAT 网关使用不同的弹性 IP 地址，则必须创建具有所需地址的新 NAT 网关，更新路由表，然后删除现有 NAT 网关 (如果不再需要)。")]),t._v(" "),a("li",[t._v("NAT 网关支持以下协议：TCP、UDP 和 ICMP。")]),t._v(" "),a("li",[t._v("不能为 NAT 网关关联安全组。可以为私有子网中的实例使用安全组以便控制进出这些实例的流量。")]),t._v(" "),a("li",[t._v("可以使用网络 ACL 控制进出 NAT 网关所在子网的流量。网络 ACL 适用于 NAT 网关的流量。NAT 网关使用端口 1024–65535。")]),t._v(" "),a("li",[t._v("NAT 网关在创建时会收到一个网络接口，该网络接口从您的子网的 IP 地址范围自动分配有一个私有 IP 地址。可以在 Amazon EC2 控制台中查看 NAT 网关的网络接口。")]),t._v(" "),a("li",[t._v("无法通过 "),a("strong",[t._v("VPC 对等连接")]),t._v("、"),a("strong",[t._v("站点到站点 VPN 连接")]),t._v("或 "),a("strong",[t._v("AWS Direct Connect")]),t._v(" 将流量路由到 NAT 网关。这些连接另一端的资源不能使用 NAT 网关。")]),t._v(" "),a("li",[t._v("对于每个唯一目的地，NAT 网关最多可以支持 55000 个并发连接。如果您每秒创建了大约 900 个与单个目的地的连接 (大约每分钟 55,000 个连接)，该限制也适用。如果目的地 IP 地址、目的地端口或协议 (TCP/UDP/ICMP) 发生更改，则可以再创建 55,000 个连接。若超过 55000 个连接，因接口分配错误导致连接错误的机会将提升。您可以通过查看您的 NAT 网关的 "),a("code",[t._v("ErrorPortAllocation")]),t._v(" CloudWatch 指标来监视这些错误。")])])],1)}),[],!1,null,null,null);v.default=n.exports}}]);