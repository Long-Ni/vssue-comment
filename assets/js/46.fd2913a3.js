(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{561:function(t,s,a){"use strict";a.r(s);var v=a(8),e=Object(v.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("包依赖关系对于包的成功至关重要。")]),t._v(" "),a("p",[t._v("开发包的功能时，很有可能会使用其他包中定义的现有代码。 这些包将成为你项目的依赖项。")]),t._v(" "),a("p",[a("strong",[t._v("package.json")]),t._v(" 文件是用于声明从开发到生产到可选的所有依赖项的宿主。 您将为每个依赖项指定包名称和最低版本信息。")]),t._v(" "),a("p",[a("strong",[t._v("yarn.lock")]),t._v(" 文件通过存储已安装依赖项的版本来确保包在安装过程中保持一致。")]),t._v(" "),a("p",[t._v("目录：")]),t._v(" "),a("TOC",{attrs:{"include-level":[2,4]}}),t._v(" "),a("h2",{attrs:{id:"yarn-依赖的类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn-依赖的类型"}},[t._v("#")]),t._v(" Yarn 依赖的类型")]),t._v(" "),a("p",[t._v("依赖关系可用于许多不同目的。 一些依赖被用来构建项目，另一些依赖被用来运行项目。 因此，你可以拥有多种不同类型的依赖项（例如："),a("strong",[t._v("dependencies")]),t._v("、"),a("strong",[t._v("devDependencies")]),t._v("、"),a("strong",[t._v("peerDependencies")]),t._v("）。")]),t._v(" "),a("p",[a("strong",[t._v("package.json")]),t._v(" 文件将包含所有这些依赖项：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my-project"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"package-a"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.0.0"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"devDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"package-b"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.2.1"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"peerDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"package-c"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^2.5.4"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"optionalDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"package-d"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^3.1.0"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("大多数人只有 "),a("strong",[t._v("dependencies")]),t._v("、"),a("strong",[t._v("devDependencies")]),t._v(" 。但是每一个都很重要，需要去理解。")]),t._v(" "),a("h3",{attrs:{id:"dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[t._v("#")]),t._v(" dependencies")]),t._v(" "),a("p",[t._v("常规依赖项。或者是运行代码的时候所需要的依赖项。")]),t._v(" "),a("h3",{attrs:{id:"devdependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devdependencies"}},[t._v("#")]),t._v(" devDependencies")]),t._v(" "),a("p",[t._v("开发依赖项。在开发工作流中某些时候需要的依赖关系，而在运行代码时（例如Babel或Flow）则不需要。")]),t._v(" "),a("h3",{attrs:{id:"peerdependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#peerdependencies"}},[t._v("#")]),t._v(" peerDependencies")]),t._v(" "),a("p",[t._v("对等依赖项是一种特殊类型的依赖项，只有在发布自己的程序包时才会出现。")]),t._v(" "),a("p",[t._v("具有对等依赖意味着你的包需要的依赖与安装软件包的人的依赖完全相同。")]),t._v(" "),a("h3",{attrs:{id:"optionaldependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#optionaldependencies"}},[t._v("#")]),t._v(" optionalDependencies")]),t._v(" "),a("p",[t._v("可选依赖项的意思就是：可选。如果他们安装失败，"),a("strong",[t._v("Yarn")]),t._v(" 仍会返回安装处理成功。")]),t._v(" "),a("p",[t._v("这对于不一定会在每台计算机上都起作用的依赖项很有用。")]),t._v(" "),a("h3",{attrs:{id:"bundleddependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bundleddependencies"}},[t._v("#")]),t._v(" bundledDependencies")]),t._v(" "),a("p",[t._v("发布程序包时包名称的数组将会被捆绑。")]),t._v(" "),a("p",[t._v("捆绑的依赖项应位于项目内部。该功能基本上与普通依赖相同。当运行 "),a("code",[t._v("yarn pack")]),t._v(" 时，它们也将被打包。")]),t._v(" "),a("p",[t._v("正常依赖通常是从 npm 注册表中安装的。捆绑的依赖项在正常依赖不足的情况下很有用：")]),t._v(" "),a("ul",[a("li",[t._v("当你想重新使用不是来自 npm 注册表或已被修改的第三方库时。")]),t._v(" "),a("li",[t._v("当你想将自己的项目重新用作模块时。")]),t._v(" "),a("li",[t._v("当你想使用模块分发一些文件时。")])]),t._v(" "),a("h2",{attrs:{id:"yarn-依赖的版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn-依赖的版本"}},[t._v("#")]),t._v(" Yarn 依赖的版本")]),t._v(" "),a("h3",{attrs:{id:"版本控制语义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本控制语义"}},[t._v("#")]),t._v(" 版本控制语义")]),t._v(" "),a("p",[a("strong",[t._v("Yarn")]),t._v(" 中的包遵循语义版本控制，也称为 "),a("strong",[t._v("semver")]),t._v("。当你从注册表安装新的包时，它将以 "),a("strong",[t._v("semver")]),t._v(" 版本范围添加到你的 "),a("strong",[t._v("package.json")]),t._v(" 中。")]),t._v(" "),a("p",[t._v("这些版本细分为 "),a("strong",[t._v("major.minor.patch")]),t._v("，类似：3.14.1、0.42.0、2.7.18。 版本的每个部分在不同的时间递增：")]),t._v(" "),a("ul",[a("li",[t._v("对包的API进行重大更改或不兼容更改时，递增 "),a("strong",[t._v("major")]),t._v("。")]),t._v(" "),a("li",[t._v("添加新功能并保持向后兼容时，递增 "),a("strong",[t._v("minor")]),t._v("。")]),t._v(" "),a("li",[t._v("修正错误并保持向后兼容时，递增 "),a("strong",[t._v("patch")]),t._v("。")])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("注意")]),t._v("：semver 格式有时还会有 labels（标签）或 extensions（扩展名），用于标记预发行版或 Beta 版（例如2.0.0-beta.3）")])]),t._v(" "),a("p",[t._v("当开发人员谈论两个 semver 版本彼此“兼容”时，他们指的是向后兼容的更改（"),a("strong",[t._v("minor")]),t._v(" 和 "),a("strong",[t._v("patch")]),t._v("）。")]),t._v(" "),a("h3",{attrs:{id:"版本范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本范围"}},[t._v("#")]),t._v(" 版本范围")]),t._v(" "),a("p",[t._v("当你指定一个依赖项时，你可以在 "),a("strong",[t._v("package.json")]),t._v(" 中指定其名称和版本范围，如下所示：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"package-1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('">=2.0.0 <3.1.4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"package-2"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^0.4.2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"package-3"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"~2.7.1"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("字符 "),a("strong",[t._v(">=")]),t._v("，"),a("strong",[t._v("<")]),t._v("，"),a("strong",[t._v("^")]),t._v(" 和 "),a("strong",[t._v("~")]),t._v(" 是运算符，用于指定版本范围。")]),t._v(" "),a("p",[t._v("版本范围的目的是指定依赖的哪些版本将适用于你的代码。")]),t._v(" "),a("h4",{attrs:{id:"比较器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#比较器"}},[t._v("#")]),t._v(" 比较器")]),t._v(" "),a("p",[t._v("每个版本范围都由比较器指定。 这些比较器是一个简单的运算符后跟一个版版本组成。 以下是一些基本运算符：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("比较器")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("<2.0.0")])]),t._v(" "),a("td",[t._v("小于 "),a("strong",[t._v("2.0.0")]),t._v(" 的任何版本")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("<=3.1.4")])]),t._v(" "),a("td",[t._v("小于或等于 "),a("strong",[t._v("3.1.4")]),t._v(" 的任何版本")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v(">0.4.2")])]),t._v(" "),a("td",[t._v("大于 "),a("strong",[t._v("0.4.2")]),t._v(" 的任何版本")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v(">=2.7.1")])]),t._v(" "),a("td",[t._v("大于或等于 "),a("strong",[t._v("2.7.1")]),t._v(" 的任何版本")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("=4.6.6")])]),t._v(" "),a("td",[t._v("仅等于 "),a("strong",[t._v("4.6.6")]),t._v(" 的版本")])])])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("注意")]),t._v("：如果未指定运算符，则在版本范围内假定 "),a("strong",[t._v("=")]),t._v("。 因此，"),a("strong",[t._v("=")]),t._v(" 运算符实际上是默认的。")])]),t._v(" "),a("h4",{attrs:{id:"交集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#交集"}},[t._v("#")]),t._v(" 交集")]),t._v(" "),a("p",[t._v('由 ""（空格）连接两个比较器。')]),t._v(" "),a("p",[t._v("例，"),a("code",[t._v(">=2.0.0 <3.1.4")]),t._v(" 表示“大于或等于 "),a("strong",[t._v("2.0.0")]),t._v(" 且小于 "),a("strong",[t._v("3.1.4")]),t._v(" 的版本”。")]),t._v(" "),a("h4",{attrs:{id:"并集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#并集"}},[t._v("#")]),t._v(" 并集")]),t._v(" "),a("p",[t._v('由 "||"（双竖线）连接两个或多个比较器。')]),t._v(" "),a("p",[t._v("例，"),a("code",[t._v("<2.0.0||>3.1.4")]),t._v(" 表示“小于 "),a("strong",[t._v("2.0.0")]),t._v(" 或者大于 "),a("strong",[t._v("3.1.4")]),t._v(" 的版本”。")]),t._v(" "),a("h4",{attrs:{id:"预发行版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#预发行版"}},[t._v("#")]),t._v(" 预发行版")]),t._v(" "),a("p",[t._v("版本也可以具有预发布标签（例如 "),a("strong",[t._v("3.1.4-beta.2")]),t._v("）。如果比较器包含带有预发布标签的版本，则它将仅与具有相同 "),a("strong",[t._v("major.minor.patch")]),t._v(" 版本的预发行版匹配。")]),t._v(" "),a("p",[t._v("例如，范围 "),a("code",[t._v(">=3.1.4-beta.2")]),t._v(" 会匹配 "),a("strong",[t._v("3.1.4-beta.2")]),t._v(" 或 "),a("strong",[t._v("3.1.4-beta.12")]),t._v(" ，但不会匹配 "),a("strong",[t._v("3.1.5-beta.1")]),t._v("。")]),t._v(" "),a("p",[t._v("预发行版本往往包含意外的重大更改，通常你不希望在指定版本之外匹配预发行版本，因此此行为很有用。")]),t._v(" "),a("h4",{attrs:{id:"高级版本范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高级版本范围"}},[t._v("#")]),t._v(" 高级版本范围")]),t._v(" "),a("h5",{attrs:{id:"范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#范围"}},[t._v("#")]),t._v(' "-" 范围')]),t._v(" "),a("p",[t._v("指定一个全部包含的集合。如果版本号部分遗漏，则用 0 填充。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("版本范围")]),t._v(" "),a("th",[t._v("扩展版本范围")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("2.0.0-3.1.4")])]),t._v(" "),a("td",[a("code",[t._v("=2.0.0 <=3.1.4")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("0.4-2")])]),t._v(" "),a("td",[a("code",[t._v(">=0.4.0 <=2.0.0")])])])])]),t._v(" "),a("h5",{attrs:{id:"范围-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#范围-2"}},[t._v("#")]),t._v(' "*" 范围')]),t._v(" "),a("p",[a("strong",[t._v("X")]),t._v("，"),a("strong",[t._v("x")]),t._v(" 或 "),a("strong",[t._v("*")]),t._v(" 中的任何一个都可用于版本的未指定部分或全部。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("版本范围")]),t._v(" "),a("th",[t._v("扩展的版本范围")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("*")])]),t._v(" "),a("td",[a("code",[t._v(">=0.0.0")]),t._v("（任何版本）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("2.x")])]),t._v(" "),a("td",[a("code",[t._v(">=2.0.0 <3.0.0")]),t._v("（匹配 "),a("strong",[t._v("major")]),t._v(" 版本）")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("3.1.x")])]),t._v(" "),a("td",[a("code",[t._v(">=3.1.0 <3.2.0")]),t._v("（匹配 "),a("strong",[t._v("major")]),t._v(" 和 "),a("strong",[t._v("minor")]),t._v(" 版本）")])]),t._v(" "),a("tr",[a("td",[t._v('""（空字符串）')]),t._v(" "),a("td",[a("code",[t._v(">=0.0.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("2")])]),t._v(" "),a("td",[a("code",[t._v(">=2.0.0 <3.0.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("3.1")])]),t._v(" "),a("td",[a("code",[t._v("3.1.x")]),t._v(" 或者 "),a("code",[t._v(">=3.1.0 <3.2.0")])])])])]),t._v(" "),a("h5",{attrs:{id:"范围-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#范围-3"}},[t._v("#")]),t._v(' "~" 范围')]),t._v(" "),a("p",[t._v("使用 "),a("strong",[t._v("~")]),t._v(" 与指定的 "),a("strong",[t._v("major")]),t._v(" 版本，则允许 "),a("strong",[t._v("minor")]),t._v(" 部分的更改。")]),t._v(" "),a("p",[t._v("使用 "),a("strong",[t._v("~")]),t._v(" 与指定的 "),a("strong",[t._v("minor")]),t._v(" 版本，则允许 "),a("strong",[t._v("patch")]),t._v(" 部分的更改。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("版本范围")]),t._v(" "),a("th",[t._v("扩展的版本范围")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("~3.1.4")])]),t._v(" "),a("td",[a("code",[t._v(">=3.1.4 <3.2.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("~3.1")])]),t._v(" "),a("td",[a("code",[t._v("3.1.x")]),t._v(" 或者 "),a("code",[t._v(">=3.1.0 <3.2.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("~3")])]),t._v(" "),a("td",[a("code",[t._v("3.x")]),t._v(" 或者 "),a("code",[t._v(">=3.0.0 <4.0.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("~3.1.4-beta.2")])]),t._v(" "),a("td",[a("code",[t._v(">=3.1.4-beta.2 <3.1.5-beta.x")])])])])]),t._v(" "),a("h5",{attrs:{id:"范围-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#范围-4"}},[t._v("#")]),t._v(' "^" 范围')]),t._v(" "),a("p",[t._v("允许所做的更改不会修改版本中的第一个非零数字，即 "),a("strong",[t._v("3.1.4")]),t._v(" 中的 "),a("strong",[t._v("3")]),t._v(" 或 "),a("strong",[t._v("0.4.2")]),t._v(" 中的 "),a("strong",[t._v("4")]),t._v("。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("版本范围")]),t._v(" "),a("th",[t._v("扩展的版本范围")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("^3.1.4")])]),t._v(" "),a("td",[a("code",[t._v(">=3.1.4 <4.0.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("^0.4.2")])]),t._v(" "),a("td",[a("code",[t._v(">=0.4.2 <0.5.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("^0.0.2")])]),t._v(" "),a("td",[a("code",[t._v(">=0.0.2 <0.0.3")])])])])]),t._v(" "),a("p",[t._v("注意：运行 "),a("code",[t._v("yarn add [package-name]")]),t._v(' 时，默认使用 "'),a("strong",[t._v("~")]),t._v('" 范围。')]),t._v(" "),a("p",[t._v("如果忽略了版本的部分内容，则缺少的部分用 "),a("strong",[t._v("0")]),t._v(" 填充。 但是，填充部分允许被更改。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("版本范围")]),t._v(" "),a("th",[t._v("扩展的版本范围")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("^0.0.x")])]),t._v(" "),a("td",[a("code",[t._v(">=0.0.0 <0.1.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("^0.0")])]),t._v(" "),a("td",[a("code",[t._v(">=0.0.0 <0.1.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("^0.x")])]),t._v(" "),a("td",[a("code",[t._v(">=0.0.0 <1.0.0")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("^0")])]),t._v(" "),a("td",[a("code",[t._v(">=0.0.0 <1.0.0")])])])])]),t._v(" "),a("h2",{attrs:{id:"yarn-选择性依赖解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yarn-选择性依赖解决方案"}},[t._v("#")]),t._v(" Yarn 选择性依赖解决方案")]),t._v(" "),a("p",[t._v("Yarn 支持选择性版本解决方案，该解决方案可以通过 package.json 文件中的 resolution 字段在依赖项中定义自定义包版本或范围。 通常，这需要在 yarn.lock 文件中进行手动编辑。")]),t._v(" "),a("h3",{attrs:{id:"为什么要这么做"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要这么做"}},[t._v("#")]),t._v(" 为什么要这么做")]),t._v(" "),a("ul",[a("li",[t._v("你可能引入了一个不经常更新的包，但是该包所依赖的另一个包有了一个重要升级。 在这种情况下，如果你直接依赖的包指定的版本范围不包括新的子依赖版本，则你将不得不等待作者更新你所直接依赖的包。")]),t._v(" "),a("li",[t._v("项目的子依赖包有一个重要的安全更新，你不想等待直接依赖包发布版本更新。")]),t._v(" "),a("li",[t._v("你所依赖的包是一个未维护但可正常工作的软件包，并且它的其中一个依赖包已升级。 当你想更新次要的依赖包时。")]),t._v(" "),a("li",[t._v("你的依赖包定义了较大的版本范围，而其子依赖包产生一个小的更新，当你不希望升级该更新则可以将其固定到较早的版本。")])]),t._v(" "),a("h3",{attrs:{id:"如何使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用"}},[t._v("#")]),t._v(" 如何使用")]),t._v(" "),a("p",[t._v("在 package.json 文件中添加一个 resolutions 字段，并定义版本覆盖：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"project"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"left-pad"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"c"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file:../c-1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"d2"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"file:../d2-1"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resolutions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"d2/left-pad"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.1.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"c/**/left-pad"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.1.2"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("然后运行 "),a("code",[t._v("yarn install")]),t._v(" 。")]),t._v(" "),a("h3",{attrs:{id:"提示与技巧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提示与技巧"}},[t._v("#")]),t._v(" 提示与技巧")]),t._v(" "),a("ul",[a("li",[t._v("如果定义了无效的 resolutions（例如，包名称无效），则会收到警告。")]),t._v(" "),a("li",[t._v("如果 resolutions 定义了无效的版本或范围无效，则会收到警告。")]),t._v(" "),a("li",[t._v("如果 resolutions 定义的版本或范围与原始版本范围不兼容，则会收到警告。")])]),t._v(" "),a("h3",{attrs:{id:"局限性和警告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#局限性和警告"}},[t._v("#")]),t._v(" 局限性和警告")]),t._v(" "),a("ul",[a("li",[t._v("嵌套的包可能无法正常工作。")]),t._v(" "),a("li",[t._v("这是一个新功能，某些极端情况可能无法正常工作。")])])],1)}),[],!1,null,null,null);s.default=e.exports}}]);